<script setup>
import { onMounted } from '#imports'

const reload = () => {
  window.location.reload(true)
}

const fullscreen = () => {
  document.documentElement.requestFullscreen()
}

onMounted(() => {
  // show navigation if mouse is close to it
  const nav = document.getElementById('nav')
  let timer
  document.addEventListener('mousemove', (e) => {
    const mouseX = e.clientX
    if (mouseX <= window.innerWidth / 4) {
      nav.style.opacity = '1'
      clearTimeout(timer)
    }
    else {
      clearTimeout(timer)
      timer = setTimeout(() => {
        nav.style.opacity = '0'
      }, 1000)
    }
  })
})
</script>

<template>
  <div>
    <div
      id="nav-container"
      class="static"
    >
      <transition
        leave-active-class="transition ease-out duration-700"
        leave-from-class="opacity-100"
        leave-to-class="opacity-0"
      >
        <div
          id="nav"
          class="absolut fixed left-4 top-1/2 flex -translate-y-1/2 flex-col rounded-full border border-gray-800 bg-black p-2 text-white"
        >
          <NuxtLink
            to="/screen"
            class="rounded-full p-2 hover:bg-slate-800"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="h-6 w-6"
            >
              <path
                fill-rule="evenodd"
                d="M2.625 6.75a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0A.75.75 0 018.25 6h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM2.625 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12A.75.75 0 017.5 12zm-4.875 5.25a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875 0a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75z"
                clip-rule="evenodd"
              />
            </svg>
          </NuxtLink>
          <NuxtLink
            class="cursor-pointer rounded-full p-2 hover:bg-slate-800"
            @click="reload"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="h-6 w-6"
            >
              <path
                fill-rule="evenodd"
                d="M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z"
                clip-rule="evenodd"
              />
            </svg>
          </NuxtLink>
          <NuxtLink
            class="cursor-pointer rounded-full p-2 hover:bg-slate-800"
            @click="fullscreen"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="h-6 w-6"
            >
              <path
                fill-rule="evenodd"
                d="M15 3.75a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0V5.56l-3.97 3.97a.75.75 0 11-1.06-1.06l3.97-3.97h-2.69a.75.75 0 01-.75-.75zm-12 0A.75.75 0 013.75 3h4.5a.75.75 0 010 1.5H5.56l3.97 3.97a.75.75 0 01-1.06 1.06L4.5 5.56v2.69a.75.75 0 01-1.5 0v-4.5zm11.47 11.78a.75.75 0 111.06-1.06l3.97 3.97v-2.69a.75.75 0 011.5 0v4.5a.75.75 0 01-.75.75h-4.5a.75.75 0 010-1.5h2.69l-3.97-3.97zm-4.94-1.06a.75.75 0 010 1.06L5.56 19.5h2.69a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75v-4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0z"
                clip-rule="evenodd"
              />
            </svg>
          </NuxtLink>
        </div>
      </transition>
    </div>
  </div>
</template>
